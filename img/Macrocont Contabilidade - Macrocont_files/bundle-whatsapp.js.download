var wppSettings={};function initWhatsappPlugin(){var o,s,r,m,g,c,u,h=window,w=document,a={init:function(){document.getElementById("close-modal").addEventListener("click",()=>{parent.window.postMessage({eventType:"close-modal"},"*")}),0<wppSettings.phones.length&&(this.initModal(),u.addEventListener("click",function(e){e.preventDefault();var e=0,t=document.getElementById("name-error"),n=document.getElementById("phone-error");""==m.value||m.value.length<3?(e++,t.textContent="Campo obrigatório."):t.textContent="",""==g.value||g.value.length<12||15<g.value.length?(e++,n.textContent="Campo obrigatório."):a.validatePhone(g.value)?n.textContent="":(e++,n.textContent="Número Inválido"),0==e?1==wppSettings.phones.length?(t=wppSettings.phones[0],n={name:m.value.toString(),phone:g.value.toString(),url:h.location.href,user_agent:navigator.userAgent,unit:t.unit_id||"",department:t.department_id||"",interest:t.interest_id||"",email:void 0},(e=c?.value)&&(n.email=e.toString()),parent.window.postMessage({eventType:"new-lead",sendUrl:wppSettings.send_url,body:n,phone:t},"*")):1<wppSettings.phones.length&&a.toggleContent():(e=document.getElementById("expad-whatsapp-modal-content").scrollHeight,parent.window.postMessage({eventType:"resize",height:e},"*"))}))},initModal:function(){o=w.getElementById("expad-whatsapp-modal-content"),s=w.getElementById("whatsapp-list"),r=w.getElementById("whatsapp-list-wrapper"),u=w.getElementById("enviaLead"),m=document.getElementById("wpp-name"),g=document.getElementById("wpp-phone"),new this.phoneMask(g).run(),c=document.getElementById("wpp-email"),r.innerHTML="";for(var e=0;e<wppSettings.phones.length;e++){const i=wppSettings.phones[e];var t=w.createElement("li"),n=w.createElement("a"),a=encodeURI("https://api.whatsapp.com/send?phone=55"+i.number.replace(/\D/g,"")+"&text="+(i.message||"")),a=(n.href=a,n.setAttribute("data-wpp-ignore","ignore"),n.target="_parent",n.addEventListener("click",function(e){e.preventDefault();var e={name:m.value.toString(),phone:g.value.toString(),url:h.location.href,user_agent:navigator.userAgent,unit:i.unit_id||"",department:i.department_id||"",interest:i.interest_id||"",email:void 0},t=c?.value;t&&(e.email=t.toString()),parent.window.postMessage({eventType:"new-lead",sendUrl:wppSettings.send_url,body:e,phone:i},"*")}),w.createElement("i")),p=(a.className="fa fa-whatsapp",w.createElement("div")),l=(p.style.paddingRight="8px",p.style.display="flex",p.style.flexDirection="column",w.createElement("small")),d=(l.textContent=i.interest,l.style.opacity=".7",l.style.paddingTop="2px",w.createElement("span")),a=(d.className="phone_label",d.appendChild(a),null==i.unit&&null==i.department||(null==i.unit?d.textContent=i.department:null==i.department?d.textContent=i.unit:d.textContent=i.unit+" - "+i.department),w.createElement("span")),d=(a.className="phone_number",a.textContent=i.number.replace(/\D/g,"").replace(/^(\d{2})(\d{4,5})(\d{4})/g,"($1) $2-$3"),p.appendChild(d),p.appendChild(l),n.appendChild(p),n.appendChild(a),t.appendChild(n),w.createElement("ul"));d.appendChild(t),r.appendChild(d)}},phoneMask:function(t){this.run=function(){t.addEventListener("keyup",function(){setTimeout(function(){var e="9"==(e=t.value.replace(/\D/g,""))[2]?(t.maxLength="15",(e=e.replace(/^(\d\d)(\d)/g,"($1) $2")).replace(/(\d{5})(\d)/,"$1-$2")):(t.maxLength="14",(e=e.replace(/^(\d\d)(\d)/g,"($1) $2")).replace(/(\d{4})(\d)/,"$1-$2"));t.value=e},1)})}},validatePhone:function(e){return/\(\d{2}\)\s\d{4,5}\-\d{4}/g.test(e)||/\d{2}\-\d{4,5}\-\d{4}/g.test(e)},toggleContent:function(){"hide-wpp-element"==o.className?o.className="expad-whatsapp-modal-content":o.className="hide-wpp-element","hide-wpp-element"==s.className?s.className="":s.className="hide-wpp-element",getHeight()}};a.init()}function reset(){document.getElementById("expad-whatsapp-modal-content").classList.remove("hide-wpp-element"),document.getElementById("whatsapp-list").classList.add("hide-wpp-element"),document.getElementById("wpp-name").value="",document.getElementById("wpp-phone").value="",document.getElementById("wpp-email").value="",document.getElementById("name-error").textContent="",document.getElementById("phone-error").textContent=""}function getHeight(){let e=0;document.getElementById("expad-whatsapp-modal-content").classList.contains("hide-wpp-element")||(e=document.getElementById("whatsapp-form").scrollHeight+90),document.getElementById("whatsapp-list").classList.contains("hide-wpp-element")||(e=document.getElementById("whatsapp-list-wrapper").scrollHeight+60),parent.window.postMessage({eventType:"resize",height:e},"*")}window.addEventListener("message",e=>{var t;"object"==typeof e.data&&(null!=e.data.base_url?(t=e.data,1==(wppSettings=t).use_email_field&&(document.getElementById("email-field").style.display="block"),console.log("wppSettings",wppSettings),initWhatsappPlugin()):"resize"==e.data.eventType?getHeight():"reset"==e.data.eventType&&reset())});